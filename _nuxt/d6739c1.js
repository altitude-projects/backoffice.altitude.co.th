(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{525:function(t,e,r){var content=r(652);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,r(23).default)("79128471",content,!0,{sourceMap:!1})},651:function(t,e,r){"use strict";r(525)},652:function(t,e,r){var o=r(22)(!1);o.push([t.i,".tab-error[data-v-05a5502c]{border-color:#ed4014;color:#ed4014}[data-v-05a5502c] .ivu-select-item,[data-v-05a5502c] .ivu-select-selection{font-weight:400}[data-v-05a5502c] textarea.ivu-input{font-size:12px}",""]),t.exports=o},798:function(t,e,r){"use strict";r.r(e);r(21),r(15),r(18),r(32),r(33);var o=r(7),n=r(4),c=(r(25),r(16),r(11),r(42),r(41),r(3)),l=r(82);function m(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function f(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={props:{isNew:{type:Boolean,default:!1}},data:function(){var t=this;return{formData:new l.a,isLoading:!this.isNew,projectTypes:{},projectInfoTh:function(e){return e("div",[e("span",t.$t("info.project.label.project_info_th"))])},projectInfoEn:function(e){return e("div",[e("span",t.$t("info.project.label.project_info_en"))])},option:function(e){return e("div",[e("span",t.$t("info.project.label.option"))])},rules:{project_code:{validator:this.validatorSpecialCharacters,trigger:"blur,change",name:"project_code",required:!0,tab:["projectInfoTh","projectInfoEn"]},project_type:{validator:this.validator,trigger:"blur,change",name:"project_type",required:!0,tab:["projectInfoTh","projectInfoEn"]},"name_translations.th":{validator:this.validator,trigger:"blur,change",name:"name_translations_th",required:!0,tab:"projectInfoTh"},"name_translations.en":{validator:this.validator,trigger:"blur,change",name:"name_translations_en",required:!0,tab:"projectInfoEn"}},checkError:{projectInfoTh:{},projectInfoEn:{}},title:{}}},computed:{language:function(){return this.$store.state.language.value}},watch:{"formData.key":function(t){this.formData.key=Object(c.toLower)(Object(c.replace)(t," ","_"))},language:function(){this.$store.state.isSelectLanguage&&this.$nextTick((function(){this.$refs.form&&this.$refs.form.validate()}))}},mounted:function(){this.isNew||this.fetchProject(),this.fetchTypeForSelect()},methods:{validator:function(t,e,r){var o=Object(c.isNumber)(e)?!e:Object(c.isEmpty)(e);!e&&o?(this.triggerErrorTab(t.name,t.tab,!0),r(this.$t("form.project.label.".concat(t.name))+" "+this.$t("error.cannot_be_blank"))):(this.triggerErrorTab(t.name,t.tab,!1),r())},validatorSpecialCharacters:function(t,e,r){var o=Object(c.isNumber)(e)?!e:Object(c.isEmpty)(e);!0===/[^\w\s]/gi.test(e)?(this.triggerErrorTab(t.name,t.tab,!0),r("".concat(this.$t("form.project.label.".concat(t.name))," ").concat(this.$t("error.invalid_characters")))):!e&&o?(this.triggerErrorTab(t.name,t.tab,!0),r(this.$t("form.project.label.".concat(t.name))+" "+this.$t("error.cannot_be_blank"))):(this.triggerErrorTab(t.name,t.tab,!1),r())},fetchProject:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,l.a.show(t.$route.params.projectId);case 3:r=e.sent,t.formData=r,t.title=f({},t.formData.json.name_translations),t.isLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},fetchTypeForSelect:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,l.a.typeForSelect();case 3:t.projectTypes=e.sent,t.isLoading=!1;case 5:case"end":return e.stop()}}),e)})))()},updateFormData:function(t){this.formData.json=f(f({},this.formData.json),t)},handleSubmit:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("messages.confirm"),content:t.$t("messages.confirm_save"),okText:t.$t("button.yes"),cancelText:t.$t("button.no"),onOk:function(){t.submitForm()}})}))},submitForm:function(){var t=this;this.$refs.form.validate(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r,o){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=8;break}return t.isLoading=!0,e.next=4,t.formData.save(t.$route.params.projectId);case 4:(n=e.sent).data&&n.data.success?(t.$Message.success({content:"".concat(t.$t("messages.success")),duration:3}),t.$nuxt.$route.name.includes("admin")?t.$router.push({name:"admin-projects"}):t.$router.push({name:"projects-projectId-show"}),t.$store.commit("SET_PROJECT",n.data.project)):n.data.error?t.$Message.error({content:n.data.error,duration:8}):t.$Message.error({content:t.$t("messages.fail"),duration:8}),e.next=9;break;case 8:window.scrollTo(0,0);case 9:t.isLoading=!1;case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}())},conditionError:function(t,e,r){var o=this;this.checkError[e][t]=this.checkError[e][t]||0,r&&this.checkError[e][t]<1?this.checkError[e][t]++:!r&&this.checkError[e][t]>0&&this.checkError[e][t]--;var n=Object(c.snakeCase)(e);this[e]=function(t){return t("div",[t("span",{style:{color:o.checkFieldError(e)?"#ed4014":"#ba6b57"}},o.$t("info.project.label."+n))])}},triggerErrorTab:function(t,e,r){var o=this;Object(c.isArray)(e)?e.forEach((function(e){o.conditionError(t,e,r)})):this.conditionError(t,e,r)},checkFieldError:function(t){return Object(c.reduce)(this.checkError[t],(function(t,e){return t+e}))}}},j=(r(651),r(9)),component=Object(j.a)(d,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLoading?r("GLoading"):r("div",[r("GBreadCrumb",{attrs:{names:[t.title]}}),t._v(" "),r("Card",{attrs:{bordered:!1,"dis-hover":"",padding:20}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.isNew?t.$t("button.new"):t.$t("button.edit"))+t._s(t.$t("pages.project_info"))+"\n    ")]),t._v(" "),r("Row",{staticClass:"font-weight-bold",attrs:{type:"flex",justify:"center"}},[r("Col",{staticStyle:{},attrs:{span:"24"}},[r("Form",{ref:"form",attrs:{model:t.formData.json,"label-position":"top",rules:t.rules}},[r("Tabs",{attrs:{type:"card",size:"small"}},[r("TabPane",{attrs:{label:t.projectInfoTh}},[r("Row",{staticClass:"mt-10",attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"16"}},[r("FormItem",{attrs:{prop:"project_code",label:t.$t("form.project.label.project_code")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_code")},model:{value:t.formData.json.project_code,callback:function(e){t.$set(t.formData.json,"project_code",e)},expression:"formData.json.project_code"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"project_type",label:t.$t("form.project.label.project_type")}},[r("Select",{attrs:{placeholder:t.$t("form.project.placeholder.project_type")},model:{value:t.formData.json.project_type,callback:function(e){t.$set(t.formData.json,"project_type",e)},expression:"formData.json.project_type"}},t._l(t.projectTypes,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                        "+t._s(e.label[t.language])+"\n                      ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{prop:"name_translations.th",label:t.$t("form.project.label.name_translations_th")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_name")},model:{value:t.formData.json.name_translations.th,callback:function(e){t.$set(t.formData.json.name_translations,"th",e)},expression:"formData.json.name_translations.th"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("form.project.label.location")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_location")},model:{value:t.formData.json.location_translations.th,callback:function(e){t.$set(t.formData.json.location_translations,"th",e)},expression:"formData.json.location_translations.th"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("form.project.label.address")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_address"),type:"textarea"},model:{value:t.formData.json.address_translations.th,callback:function(e){t.$set(t.formData.json.address_translations,"th",e)},expression:"formData.json.address_translations.th"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("form.project.label.description")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_description")},model:{value:t.formData.json.description_translations.th,callback:function(e){t.$set(t.formData.json.description_translations,"th",e)},expression:"formData.json.description_translations.th"}})],1)],1)],1),t._v(" "),r("div",{staticClass:"text-center pb-10"},[r("Button",{staticClass:"default-button button-grey",on:{click:function(e){return t.$router.back()}}},[t._v("\n                  "+t._s(t.$t("button.cancel"))+"\n                ")]),t._v(" "),r("Button",{staticClass:"default-button",attrs:{type:"success"},nativeOn:{click:function(e){return t.handleSubmit(e)}}},[t._v("\n                  "+t._s(t.$t("button.save"))+"\n                ")])],1)],1),t._v(" "),r("TabPane",{attrs:{label:t.projectInfoEn}},[r("Row",{staticClass:"mt-10",attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"16"}},[r("FormItem",{attrs:{prop:"project_code",label:t.$t("form.project.label.project_code")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_code")},model:{value:t.formData.json.project_code,callback:function(e){t.$set(t.formData.json,"project_code",e)},expression:"formData.json.project_code"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"project_type",label:t.$t("form.project.label.project_type")}},[r("Select",{attrs:{placeholder:t.$t("form.project.placeholder.project_type")},model:{value:t.formData.json.project_type,callback:function(e){t.$set(t.formData.json,"project_type",e)},expression:"formData.json.project_type"}},t._l(t.projectTypes,(function(e){return r("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n                        "+t._s(e.label[t.language])+"\n                      ")])})),1)],1),t._v(" "),r("FormItem",{attrs:{prop:"name_translations.en",label:t.$t("form.project.label.name_translations_en")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_name")},model:{value:t.formData.json.name_translations.en,callback:function(e){t.$set(t.formData.json.name_translations,"en",e)},expression:"formData.json.name_translations.en"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("form.project.label.location")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_location")},model:{value:t.formData.json.location_translations.en,callback:function(e){t.$set(t.formData.json.location_translations,"en",e)},expression:"formData.json.location_translations.en"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("form.project.label.address")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_address"),type:"textarea"},model:{value:t.formData.json.address_translations.en,callback:function(e){t.$set(t.formData.json.address_translations,"en",e)},expression:"formData.json.address_translations.en"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("form.project.label.description")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_description")},model:{value:t.formData.json.description_translations.en,callback:function(e){t.$set(t.formData.json.description_translations,"en",e)},expression:"formData.json.description_translations.en"}})],1)],1)],1),t._v(" "),r("div",{staticClass:"text-center pb-10"},[r("Button",{staticClass:"default-button button-grey",on:{click:function(e){return t.$router.back()}}},[t._v("\n                  "+t._s(t.$t("button.cancel"))+"\n                ")]),t._v(" "),r("Button",{staticClass:"default-button",attrs:{type:"success"},nativeOn:{click:function(e){return t.handleSubmit(e)}}},[t._v("\n                  "+t._s(t.$t("button.save"))+"\n                ")])],1)],1),t._v(" "),r("TabPane",{attrs:{label:t.$t("info.project.label.option")}},[r("Row",{staticClass:"mt-10",attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{span:"16"}},[r("FormItem",{attrs:{label:t.$t("form.project.label.building_amount")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_building_amount")},model:{value:t.formData.json.building_amount,callback:function(e){t.$set(t.formData.json,"building_amount",e)},expression:"formData.json.building_amount"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("form.project.label.unit_amount")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_unit_amount")},model:{value:t.formData.json.unit_amount,callback:function(e){t.$set(t.formData.json,"unit_amount",e)},expression:"formData.json.unit_amount"}})],1),t._v(" "),r("FormItem",{attrs:{label:t.$t("form.project.label.map_url")}},[r("Input",{attrs:{placeholder:t.$t("form.project.placeholder.project_map_url")},model:{value:t.formData.json.map_url,callback:function(e){t.$set(t.formData.json,"map_url",e)},expression:"formData.json.map_url"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"cover_image",label:t.$t("form.project.label.cover_image")}},[r("GUpload",{attrs:{"field-key":"cover_image"},on:{updateParentValue:t.updateFormData},model:{value:t.formData.json.cover_image,callback:function(e){t.$set(t.formData.json,"cover_image",e)},expression:"formData.json.cover_image"}})],1),t._v(" "),r("FormItem",{attrs:{prop:"images",label:t.$t("form.project.label.images")}},[r("GUpload",{attrs:{"field-key":"images",multiple:""},on:{updateParentValue:t.updateFormData},model:{value:t.formData.json.images,callback:function(e){t.$set(t.formData.json,"images",e)},expression:"formData.json.images"}})],1)],1)],1),t._v(" "),r("div",{staticClass:"text-center pb-10"},[r("Button",{staticClass:"default-button button-grey",on:{click:function(e){return t.$router.back()}}},[t._v("\n                  "+t._s(t.$t("button.cancel"))+"\n                ")]),t._v(" "),r("Button",{staticClass:"default-button",attrs:{type:"success"},nativeOn:{click:function(e){return t.handleSubmit(e)}}},[t._v("\n                  "+t._s(t.$t("button.save"))+"\n                ")])],1)],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"05a5502c",null);e.default=component.exports}}]);