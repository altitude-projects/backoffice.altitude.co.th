(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{409:function(t,e,n){"use strict";n.d(e,"a",(function(){return h}));n(21),n(15),n(18),n(32),n(33);var r=n(4),o=n(7),c=n(30),d=n(31),l=(n(16),n(25),n(3)),m=n(6),f=n(5);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.json=v(v({},e),{},{area:e.area||0})}var e,n,o,_,h,j,y;return Object(d.a)(t,[{key:"save",value:(y=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,r=Object(f.e)(this.json,"unit"),!this.json.id){t.next=8;break}return t.next=5,Object(m.d)("patch",Object(m.e)(m.a,"projects/".concat(e,"/assets/").concat(this.json.id)),{headers:Object(m.c)(!0),data:r});case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,Object(m.d)("post",Object(m.e)(m.a,"projects/".concat(e,"/assets")),{headers:Object(m.c)(!0),data:r});case 10:n=t.sent;case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return y.apply(this,arguments)})},{key:"asTableJson",value:function(t,e){return{id:this.json.id,no:(e-1)*t+this.json.no,address_number:this.json.address_number||"-",asset_number:this.json.asset_number||"-",asset_model:this.json.asset_model||"-",asset_type_name:this.json.asset_type.name,building:this.json.building||"-",usable_area:this.json.usable_area||"-",area:this.json.area||"-",phase:this.json.phase||"-",floor:this.json.floor||"-",property_type:this.json.property_type||"-"}}}],[{key:"index",value:(j=Object(r.a)(regeneratorRuntime.mark((function e(n,r,o,c){var d,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("get",Object(m.e)(m.a,"projects/".concat(n,"/assets")),{headers:Object(m.c)(!0),params:{search:r,page:o,per_page:c}});case 2:if(d=e.sent,f=Object(l.orderBy)(d.data.assets,["address_number"],["asc"]),200!==d.status){e.next=7;break}return f=Object(l.map)(f,(function(e,n){return e.no=n+1,new t(e)})),e.abrupt("return",{units:f,total_count:d.data.total_count});case 7:return e.abrupt("return",[]);case 8:case"end":return e.stop()}}),e)}))),function(t,e,n,r){return j.apply(this,arguments)})},{key:"show",value:(h=Object(r.a)(regeneratorRuntime.mark((function e(n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("get",Object(m.e)(m.a,"projects/".concat(n,"/assets/").concat(r)),{headers:Object(m.c)(!0)});case 2:if(200!==(o=e.sent).status){e.next=5;break}return e.abrupt("return",new t(o.data.asset));case 5:case"end":return e.stop()}}),e)}))),function(t,e){return h.apply(this,arguments)})},{key:"destroy",value:(_=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.d)("delete",Object(m.e)(m.a,"projects/".concat(e,"/assets/").concat(n)),{headers:Object(m.c)(!0)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t,e){return _.apply(this,arguments)})},{key:"assetBillings",value:(o=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.d)("get",Object(m.e)(m.a,"projects/".concat(e,"/assets/").concat(n,"/asset_billings")),{headers:Object(m.c)(!0)});case 2:if(200!==(r=t.sent).status){t.next=5;break}return t.abrupt("return",r.data);case 5:case"end":return t.stop()}}),t)}))),function(t,e){return o.apply(this,arguments)})},{key:"importAssets",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(r=new FormData).append("file",n),t.next=4,Object(m.d)("post",Object(m.e)(m.a,"projects/".concat(e,"/assets/import_assets")),{headers:Object(m.c)(!0,!0),data:r});case 4:return o=t.sent,t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),function(t,e){return n.apply(this,arguments)})},{key:"importAssetSupplies",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(e,n,r){var o,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(o=new FormData).append("file",n),o.append("images_zip_file",r),t.next=5,Object(m.d)("post",Object(m.e)(m.a,"projects/".concat(e,"/assets/import_asset_supplies")),{headers:Object(m.c)(!0,!0),data:o});case 5:return c=t.sent,t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)}))),function(t,n,r){return e.apply(this,arguments)})}]),t}()},508:function(t,e,n){var content=n(620);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("0051b66e",content,!0,{sourceMap:!1})},619:function(t,e,n){"use strict";n(508)},620:function(t,e,n){var r=n(22)(!1);r.push([t.i,".img-incident[data-v-f4112d42]{width:10%;border-radius:10px}.header-content[data-v-f4112d42]{font-weight:700}.custom-font-size[data-v-f4112d42]{font-size:12px}.custom-text-position[data-v-f4112d42]{text-align:right}[data-v-f4112d42] .default-button{padding:0 20px;margin:0 5px;border-radius:5px;font-size:12px}",""]),t.exports=r},759:function(t,e,n){"use strict";n.r(e);var r=n(7),o=n(4),c=(n(48),n(11),n(21),n(15),n(18),n(32),n(33),n(25),n(3)),d=n(409),l=n(426),m=n(448),f=n(5);function _(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function v(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var h={components:{},data:function(){return{address:"",choices:[],deviceName:"",expiredDatetime:"",incident:new l.a,isLoading:!0,visibleAddComment:!1,images:[],buttonLoading:!1,units:[],videos:[],formData:new m.a,updatedIncidentBy:""}},computed:{language:function(){return this.$store.state.language.value}},watch:{address:function(t){this.address=t}},mounted:function(){this.fetchUnits(),this.fetchIncident()},methods:{formatDate:f.g,fullFormatDatetime:f.i,fetchUnits:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.index(t.$route.params.projectId);case 2:n=e.sent,t.units=Object(c.map)(n.units,(function(t){return t.asTableJson()}));case 4:case"end":return e.stop()}}),e)})))()},lastUpdatedIncidentBy:function(t,e){e+1===this.incident.json.incident_actions.length&&(this.updatedIncidentBy=t.full_name||t["full_name_".concat(this.language,"_without_title")]||"-")},checkChoiceText:function(t,e){var n=this,r=Object(c.find)(this.incident.json.answer_json_data,["question_id",t]);return r?"multiple"===e?Object(c.map)(r.choice_text,(function(t){return t[n.language]||"-"})).join(", "):"single"===e?r.choice_text[this.language]||"-":Object(c.isObject)(r.choice_text)?r.choice_text[this.language]:r.choice_text:"-"},getImagesAndVideos:function(){var t=this;this.images=[],this.videos=[],this.incident.json.attachments.map((function(e){t.isImage(e.content_type)?t.images.push(e):t.videos.push(e)}))},isImage:function(t){return Object(c.includes)(t,"image")},isVideo:function(t){return Object(c.includes)(t,"video")},fetchIncident:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,l.a.show(t.$route.params.projectId,t.$route.params.incidentId);case 3:t.incident=e.sent,t.incident.json.description_translations&&(n=t.incident.json.description_translations[t.language].indexOf("#"),t.deviceName=t.incident.json.description_translations[t.language].substring(n,0),r=t.incident.json.description_translations[t.language].indexOf("*"),t.expiredDatetime=t.incident.json.description_translations[t.language].substring(n+2,r)),o=Object(c.find)(t.units,["id",t.incident.json.asset_id]),t.address=o?o.address_number:"-",t.getImagesAndVideos(),t.isLoading=!1;case 9:case"end":return e.stop()}}),e)})))()},convertDescription:function(t){return"Complete this incident."===t||"ปิดเรื่องนี้"===t?this.$t("form.incident.status_complete"):"Change status to pending Approval."===t||"เปลี่ยนสถานะเป็นรอการอนุมัติ"===t?this.$t("form.incident.status_change_to"):"Cancel this incident."===t||"ยกเลิกเรื่องนี้"===t?this.$t("form.incident.status_cancelled"):t},handleChange:function(t){var e=this;return new Promise((function(n){e.$Modal.confirm({title:e.$t("pages.confirm"),content:e.$t("messages.confirm_".concat(t)),okText:e.$t("button.yes"),cancelText:e.$t("button.no"),onOk:function(){e.changeStatus(t)}})}))},updateFormData:function(t){this.formData.json=v(v({},this.formData.json),t)},changeStatus:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("reject"!==t){n.next=6;break}return n.next=3,l.a.cancel(e.$route.params.projectId,e.$route.params.incidentId);case 3:r=n.sent,n.next=15;break;case 6:if("close"!==t){n.next=12;break}return n.next=9,l.a.complete(e.$route.params.projectId,e.$route.params.incidentId);case 9:r=n.sent,n.next=15;break;case 12:return n.next=14,l.a.submit(e.$route.params.projectId,e.$route.params.incidentId);case 14:r=n.sent;case 15:200===r.status?(e.$Message.success({content:e.$t("messages.successfully_".concat(r.data.incident.status)),duration:3}),e.autoCommentChangeStatus(t)):r.data&&r.data.error?e.$Message.error({content:r.data.error,duration:8}):e.$Message.error({contetn:e.$t("error.fail"),duration:8});case 16:case"end":return n.stop()}}),n)})))()},autoCommentChangeStatus:function(t){"submit"===t?(this.formData.json.description=this.$t("form.incident.status_change_to"),this.submitForm(t)):"reject"===t?(this.formData.json.description=this.$t("form.incident.status_cancelled"),this.submitForm(t)):(this.formData.json.description=this.$t("form.incident.status_complete"),this.submitForm(t))},handleSubmit:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("messages.are_you_sure"),content:t.$t("messages.confirm_save"),okText:t.$t("button.yes"),cancelText:t.$t("button.no"),onOk:function(){t.submitForm()}})}))},submitForm:function(t){var e=this;this.$refs.form.validate(function(){var n=Object(o.a)(regeneratorRuntime.mark((function n(r){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!r&&!t){n.next=8;break}return e.buttonLoading=!0,n.next=4,e.formData.save(e.$route.params.projectId,e.incident.json.id);case 4:o=n.sent,e.buttonLoading=!1,e.isLoading=!0,o.data&&o.data.success?(t||e.$Message.success({content:e.$t("pages.comment")+e.$t("messages.successfully_created"),duration:3}),e.visibleAddComment=!1,e.$refs.form.resetFields(),e.fetchIncident()):(e.$Message.error({conetnt:e.$t("messages.fail"),duration:8}),e.isLoading=!0);case 8:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}}},j=(n(619),n(9)),component=Object(j.a)(h,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("GLoading"):n("div",[n("GBreadCrumb",{attrs:{names:[t.incident.json.default_question_answer]}}),t._v(" "),n("Card",{attrs:{bordered:!1,"dis-hover":"",padding:20}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("p",[t._v(t._s(t.$t("pages.incident_details")))])]),t._v(" "),n("Row",{staticClass:"mb-10",attrs:{type:"flex",justify:"end"}},[n("Col",[["opened"].includes(t.incident.json.status)&&"Admin"!==t.incident.json.incidentable_type?n("Button",{staticClass:"button-blue",attrs:{type:"primary"},on:{click:function(e){return t.handleChange("submit")}}},[t._v("\n          "+t._s(t.$t("button.submit_to_reporter"))+"\n        ")]):t._e()],1),t._v(" "),["cancelled","completed"].includes(t.incident.json.status)?t._e():n("Col",[n("Button",{staticClass:"default-button",attrs:{type:"error"},on:{click:function(e){return t.handleChange("reject")}}},[t._v("\n          "+t._s(t.$t("button.reject"))+"\n        ")])],1),t._v(" "),["pending_approval","opened"].includes(t.incident.json.status)?n("Col",[n("Button",{staticClass:"default-button",attrs:{type:"success"},on:{click:function(e){return t.handleChange("close")}}},[t._v("\n          "+t._s(t.$t("button.close"))+"\n        ")])],1):t._e()],1),t._v(" "),n("Row",{attrs:{type:"flex",justify:"center",gutter:24}},[n("Col",{staticClass:"mb-10",attrs:{xs:24,sm:24,md:24,lg:12}},[n("Card",{attrs:{"dis-hover":""}},[n("Row",{attrs:{type:"flex",justify:"space-between"}},[n("Col",{attrs:{xs:20,sm:24,md:18,lg:16}},[n("span",{staticClass:"header-content"},[t._v("\n                "+t._s(t.$t("info.incident.label.incident_type"))+":\n              ")]),t._v("\n              "+t._s(t.incident.json.incident_type.name_translations[t.language])+"\n            ")]),t._v(" "),n("Col",{staticClass:"text-right",attrs:{xs:0,sm:24,md:6,lg:8}},[n("Col",[n("div",{staticClass:"ml-5",staticStyle:{float:"right"}},[n("GStatusLabelPreview",{attrs:{status:t.incident.json.status}})],1),t._v(" "),n("span",{staticClass:"label"},[t._v("\n                  "+t._s(t.$t("info.incident.label.status"))+":\n                ")])]),t._v(" "),t.incident.json.rating?n("Col",{staticClass:"mt-10"},[n("div",{staticClass:"ml-5",staticStyle:{float:"right"}},[n("Rate",{staticStyle:{"font-size":"14px"},attrs:{disabled:"",icon:"ios-heart"},model:{value:t.incident.json.rating,callback:function(e){t.$set(t.incident.json,"rating",e)},expression:"incident.json.rating"}})],1),t._v(" "),n("span",{staticClass:"label"},[t._v("\n                  "+t._s(" "+t.$t("info.incident.label.rating")+":")+"\n                ")])]):t._e()],1),t._v(" "),n("Col",{staticClass:"text-left",attrs:{xs:24,sm:0}},[n("span",{staticClass:"mr-5",staticStyle:{float:"left"}},[t._v("\n                "+t._s(t.$t("info.incident.label.status"))+":")]),t._v(" "),n("div",[n("GStatusLabelPreview",{attrs:{status:t.incident.json.status}})],1)])],1),t._v(" "),t.deviceName&&t.expiredDatetime?n("Row",[n("span",{staticClass:"header-content"},[t._v("\n              "+t._s(t.$t("info.incident.label.device_info")+":")+"\n            ")]),t._v(" "),n("Col",[n("span",[t._v("\n                "+t._s("- "+t.$t("info.incident.label.device_name")+":")+"\n              ")]),t._v(" "),n("span",[t._v("\n                "+t._s(t.deviceName)+"\n              ")])]),t._v(" "),n("Col",[n("span",[t._v("\n                "+t._s("- "+t.$t("info.incident.label.warranty_expired_datetime")+":")+"\n              ")]),t._v(" "),n("span",[t._v("\n                "+t._s(t.formatDate(t.expiredDatetime))+"\n              ")])])],1):t._e(),t._v(" "),t._l(t.incident.json.incident_type.questions,(function(e,r){return n("Row",{key:e.id,attrs:{type:"flex",gutter:12,justify:0===r?"space-between":"start"}},[n("Col",[n("span",{staticClass:"header-content"},[t._v("\n                "+t._s(t.incident.json.incident_type.questions[r].question_text_translations[t.language])+":\n              ")]),t._v(" "),r?t._e():n("span",[t._v("\n                "+t._s(t.checkChoiceText(e.id,e.question_type))+"\n              ")])]),t._v(" "),r?n("Col",[t._v("\n              "+t._s(t.checkChoiceText(e.id,e.question_type))+"\n            ")]):t._e()],1)})),t._v(" "),"Admin"!==t.incident.json.incidentable_type?n("Row",[n("span",{staticClass:"header-content"},[t._v("\n              "+t._s(t.$t("info.unit.label.address"))+"\n            ")]),t._v("\n            :"+t._s(t.address)+"\n          ")]):t._e(),t._v(" "),t.images.length>0?n("GGallery",{attrs:{"incident-images":"",title:t.$t("form.gallery.label.images"),"separate-image":!0,images:t.images}}):t._e(),t._v(" "),t.videos.length>0?n("GGallery",{attrs:{"separate-image":!0,images:t.videos}}):t._e(),t._v(" "),n("br"),t._v(" "),n("Row",{attrs:{type:"flex",justify:"end",gutter:12}},[n("Col",{attrs:{xs:24,sm:24,md:24,lg:20}},[n("Col",{staticClass:"custom-text-position",attrs:{xs:24,sm:24,md:24,lg:12}},[n("span",{staticClass:"header-content custom-font-size"},[t._v("\n                  "+t._s(t.$t("info.incident.label.created_by"))+":\n                ")]),t._v(" "),"Admin"===t.incident.json.incidentable_type?n("span",{staticClass:"custom-font-size"},[t._v("\n                  "+t._s(t.incident.json.incidentable.full_name)+"\n                ")]):n("span",{staticClass:"custom-font-size"},[t._v("\n                  "+t._s(t.incident.json.incidentable["full_name_"+t.language])+"\n                ")])]),t._v(" "),n("Col",{staticClass:"custom-text-position",attrs:{xs:24,sm:24,md:24,lg:12}},[n("span",{staticClass:"header-content custom-font-size"},[t._v("\n                  "+t._s(t.$t("info.incident.label.created_at"))+":\n                ")]),t._v(" "),n("span",{staticClass:"custom-font-size"},[t._v("\n                  "+t._s(t.fullFormatDatetime(t.incident.json.created_at))+"\n                ")])])],1)],1),t._v(" "),t.incident.json.incident_actions.length>0?n("Row",{attrs:{type:"flex",justify:"end",gutter:12}},[n("Col",{attrs:{xs:24,sm:24,md:24,lg:20}},[n("Col",{staticClass:"custom-text-position",attrs:{xs:24,sm:24,md:24,lg:12}},[n("span",{staticClass:"header-content custom-font-size"},[t._v("\n                  "+t._s(t.$t("info.incident.label.updated_by"))+":\n                ")]),t._v(" "),n("span",{staticClass:"custom-font-size"},[t._v("\n                  "+t._s(t.updatedIncidentBy)+"\n                ")])]),t._v(" "),n("Col",{staticClass:"custom-text-position",attrs:{xs:24,sm:24,md:24,lg:12}},[n("span",{staticClass:"header-content custom-font-size"},[t._v("\n                  "+t._s(t.$t("info.incident.label.updated_at"))+":\n                ")]),t._v(" "),n("span",{staticClass:"custom-font-size"},[t._v("\n                  "+t._s(t.fullFormatDatetime(t.incident.json.incident_actions[t.incident.json.incident_actions.length-1].updated_at))+"\n                ")])])],1)],1):t._e()],2)],1),t._v(" "),n("Col",{attrs:{xs:24,sm:24,md:24,lg:12}},[n("Card",{attrs:{"dis-hover":"",padding:20}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("h3",[t._v("\n              "+t._s(t.$t("pages.comment"))+"\n            ")])]),t._v(" "),t.incident.json.incident_actions.length?t._e():n("div",[n("p",{staticStyle:{"text-align":"center","font-size":"12px",margintop:"20px"}},[t._v("\n              "+t._s(t.$t("messages.no_comment"))+"\n            ")])]),t._v(" "),t._l(t.incident.json.incident_actions,(function(e,r){return n("div",{key:r},[n("p",[t._v("\n              "+t._s(t.convertDescription(e.description))+"\n            ")]),t._v(" "),"Complete this incident."===e.description||"ปิดเรื่องนี้"===e.description?n("p",[t._v("\n              "+t._s(t.incident.json.note)+"\n            ")]):t._e(),t._v(" "),e.attachments?n("GGallery",{attrs:{"incident-image":"",title:t.$t("form.gallery.label.images"),images:e.attachments,"separate-image":!0}}):t._e(),t._v(" "),n("Row",{attrs:{type:"flex",justify:"end",gutter:24}},[n("Col",[n("Icon",{attrs:{type:"md-person"}}),t._v("\n                "+t._s(e.incident_actionable.full_name||e.incident_actionable["full_name_"+t.language+"_without_title"]||"-")+"\n                "+t._s(t.lastUpdatedIncidentBy(e.incident_actionable,r))+"\n              ")],1),t._v(" "),n("Col",[t._v(t._s(t.fullFormatDatetime(e.created_at)))])],1),t._v(" "),r+1!==t.incident.json.incident_actions.length?n("Divider",{staticClass:"my-15 mx-10",attrs:{width:"80%"}}):t._e()],1)}))],2),t._v(" "),n("Row",{staticClass:"mt-10",attrs:{type:"flex",justify:"end"}},[n("Col",[n("Button",{staticClass:"default-button",attrs:{type:"success"},on:{click:function(e){t.visibleAddComment=!0}}},[t._v("\n              "+t._s(t.$t("button.add_comment"))+"\n            ")])],1)],1)],1)],1)],1),t._v(" "),n("Modal",{attrs:{"footer-hide":"",closable:!1,"mask-closable":!1},model:{value:t.visibleAddComment,callback:function(e){t.visibleAddComment=e},expression:"visibleAddComment"}},[n("Form",{ref:"form",attrs:{model:t.formData.json}},[n("FormItem",{attrs:{prop:"description",label:t.$t("form.incident_action.label.description")}},[n("Input",{attrs:{type:"textarea"},model:{value:t.formData.json.description,callback:function(e){t.$set(t.formData.json,"description",e)},expression:"formData.json.description"}})],1),t._v(" "),n("FormItem",{attrs:{prop:"attachments"}},[n("p",[t._v(t._s(t.$t("form.incident_action.label.add_image_video")))]),t._v(" "),n("GUpload",{attrs:{"is-incident":"","field-key":"attachments",multiple:""},on:{updateParentValue:t.updateFormData},model:{value:t.formData.json.attachments,callback:function(e){t.$set(t.formData.json,"attachments",e)},expression:"formData.json['attachments']"}})],1),t._v(" "),n("FormItem",{attrs:{align:"center"}},[n("Button",{staticClass:"default-button button-grey",on:{click:function(e){t.visibleAddComment=!1,t.$refs.form.resetFields()}}},[t._v("\n          "+t._s(t.$t("button.cancel"))+"\n        ")]),t._v(" "),n("Button",{class:t.formData.json.attachments.length>0||t.formData.json.description?"default-button button-green":"default-button",attrs:{loading:t.buttonLoading,disabled:!(t.formData.json.attachments.length>0||t.formData.json.description)},on:{click:t.handleSubmit}},[t._v("\n          "+t._s(t.$t("button.submit"))+"\n        ")])],1)],1)],1)],1)}),[],!1,null,"f4112d42",null);e.default=component.exports}}]);