(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{421:function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));r(21),r(15),r(18),r(32),r(33);var n=r(4),c=r(7),o=r(30),d=r(31),j=(r(25),r(3)),m=r(6),h=r(5);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(c.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(o.a)(this,e),this.json=f(f({},t),{},{admin:t.admin||{profile_image:"",first_name:"",last_name:"",telephone:"",email:""}})}var t,r,c,l,O,v,w;return Object(d.a)(e,[{key:"activate",value:(w=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("patch",Object(m.e)(m.a,"projects/".concat(t,"/project_admins/").concat(this.json.id,"/activate")),{headers:Object(m.c)(!0)});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return w.apply(this,arguments)})},{key:"inactivate",value:(v=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("patch",Object(m.e)(m.a,"projects/".concat(t,"/project_admins/").concat(this.json.id,"/inactivate")),{headers:Object(m.c)(!0)});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)}))),function(e){return v.apply(this,arguments)})},{key:"save",value:(O=Object(n.a)(regeneratorRuntime.mark((function e(t){var r,n,c,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,n=Object(h.e)(this.json.admin,"admin"),c=Object(h.e)(this.json,"projectAdmin"),o={admin:n,project_admin:c},o=Object(h.n)(o,null,["profile_image"]),!this.json.id){e.next=11;break}return e.next=8,Object(m.d)("patch",Object(m.e)(m.a,"projects/".concat(t,"/project_admins/").concat(this.json.id)),{headers:Object(m.c)(!0),data:o});case 8:r=e.sent,e.next=14;break;case 11:return e.next=13,Object(m.d)("post",Object(m.e)(m.a,"projects/".concat(t,"/project_admins")),{headers:Object(m.c)(!0),data:o});case 13:r=e.sent;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)}))),function(e){return O.apply(this,arguments)})},{key:"asTableJson",value:function(e,t){return{id:this.json.id,fullName:this.json.admin.full_name,frist_name:this.json.admin.frist_name,last_name:this.json.admin.last_name,no:(t-1)*e+this.json.no,email:this.json.admin.email,telephone:this.json.admin.telephone||"-",role:this.json.role||"-",status:this.json.status}}}],[{key:"index",value:(l=Object(n.a)(regeneratorRuntime.mark((function t(r,n,c,o){var d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.d)("get",Object(m.e)(m.a,"projects/".concat(r,"/project_admins")),{params:{page:n,per_page:c,search:o},headers:Object(m.c)(!0)});case 2:if(200!==(d=t.sent).status){t.next=5;break}return t.abrupt("return",Object(j.map)(d.data.project_admins,(function(u,t){return u.no=t+1,new e(u)})));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t)}))),function(e,t,r,n){return l.apply(this,arguments)})},{key:"show",value:(c=Object(n.a)(regeneratorRuntime.mark((function t(r,n){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.d)("get",Object(m.e)(m.a,"projects/".concat(r,"/project_admins/").concat(n)),{headers:Object(m.c)(!0)});case 2:if(200!==(c=t.sent).status){t.next=5;break}return t.abrupt("return",new e(c.data.project_admin));case 5:case"end":return t.stop()}}),t)}))),function(e,t){return c.apply(this,arguments)})},{key:"rolesForSelect",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("get",Object(m.e)(m.a,"projects/".concat(t,"/project_admins/roles_for_select")),{headers:Object(m.c)(!0)});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",r.data.roles);case 5:case"end":return e.stop()}}),e)}))),function(e){return r.apply(this,arguments)})},{key:"destroy",value:(t=Object(n.a)(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("delete",Object(m.e)(m.a,"projects/".concat(t,"/project_admins/").concat(r)),{headers:Object(m.c)(!0)});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)}))),function(e,r){return t.apply(this,arguments)})}]),e}()},724:function(e,t,r){"use strict";r.r(t);var n=r(4),c=(r(25),r(108),r(3)),o=r(421),d={data:function(){return{adminUsers:[],loading:!1,isLoading:!0,currentPage:1,pageSize:10,search:""}},mounted:function(){this.fetchAdminUsers()},methods:{fetchAdminUsers:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.loading=e,t.adminUsers=[],r.next=4,o.a.index(t.$route.params.projectId,t.currentPage,t.pageSize,t.search);case 4:n=r.sent,t.adminUsers=Object(c.map)(n,(function(e){return e.asTableJson(t.pageSize,t.currentPage)})),t.isLoading=!1,t.loading=!1;case 8:case"end":return r.stop()}}),r)})))()},searchItem:function(e){this.search=e,this.currentPage=1,this.fetchAdminUsers()}}},j=r(9),component=Object(j.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.isLoading?r("GLoading"):r("Card",{attrs:{"dis-hover":"",bordered:!1}},[r("div",{attrs:{slot:"title"},slot:"title"},[r("h3",[e._v("\n      "+e._s(e.$t("pages.project_users"))+"\n    ")])]),e._v(" "),r("GIndexPage",{attrs:{items:e.adminUsers,"show-sizer":"","search-by-api":"","current-page":e.currentPage,"page-size":e.pageSize,loading:e.loading,"new-button-name":e.$t("pages.project_user"),component:"GAdminUserTable","new-url":{name:"projects-projectId-admin_users-new",params:{projectId:this.$route.params.projectId}}},on:{handleToSearchItem:e.searchItem,reloadData:e.fetchAdminUsers}})],1)}),[],!1,null,null,null);t.default=component.exports}}]);