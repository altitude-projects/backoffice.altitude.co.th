(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{417:function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));n(21),n(15),n(18),n(32),n(33);var r=n(4),o=n(7),c=n(30),l=n(31),m=(n(25),n(3)),f=n(6),_=n(5);function d(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function h(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.json=h(h({},e),{},{name_translations:e.name_translations||{en:"",th:""},url_translations:e.url_translations||{en:"",th:""},menu_layout:e.menu_layout||"01",font_color:e.font_color||"#fff",button_color:e.button_color||"#fff"})}var e,n,o,d,j,v;return Object(l.a)(t,[{key:"save",value:(v=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,(r=Object(m.cloneDeep)(this.json)).is_in_app_menu="yes"===r.is_in_app_menu,o=Object(_.e)(r,"menu"),o=Object(_.n)(o,"menu",["logo_image","background_image"]),!this.json.id){t.next=11;break}return t.next=8,Object(f.d)("patch",Object(f.e)(f.a,"projects/".concat(e,"/menus/").concat(this.json.id)),{data:o,headers:Object(f.c)(!0)});case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,Object(f.d)("post",Object(f.e)(f.a,"projects/".concat(e,"/menus")),{data:o,headers:Object(f.c)(!0)});case 13:n=t.sent;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"activate",value:(j=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.d)("patch",Object(f.e)(f.a,"projects/".concat(e,"/menus/").concat(this.json.id,"/activate")),{headers:Object(f.c)(!0)});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return j.apply(this,arguments)})},{key:"inactivate",value:(d=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.d)("patch",Object(f.e)(f.a,"projects/".concat(e,"/menus/").concat(this.json.id,"/inactivate")),{headers:Object(f.c)(!0)});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return d.apply(this,arguments)})},{key:"asInfoJson",value:function(){return{id:this.json.id,key:this.json.key,name_en:this.json.name_translations?this.json.name_translations.en:"-",name_th:this.json.name_translations?this.json.name_translations.th:"-",url_en:this.json.url_translations?this.json.url_translations.en:"-",url_th:this.json.url_translations?this.json.url_translations.th:"-",sorting_index:this.json.sorting_index?this.json.sorting_index:"-",button_color:this.json.button_color?this.json.button_color:"-",font_color:this.json.font_color?this.json.font_color:"-",background_image:this.json.background_image?this.json.background_image:null,logo_image:this.json.logo_image?this.json.logo_image:null,menu_layout:this.json.menu_layout?this.json.menu_layout:"-"}}},{key:"asTableJson",value:function(){return{created_at:this.json.created_at,id:this.json.id,button_color:this.json.button_color||"",font_color:this.json.font_color||"#000000",menu_layout:this.json.menu_layout,logo_image:this.json.logo_image,background_image:this.json.background_image||"",name_en:this.json.name_translations.en||"",name_th:this.json.name_translations.th||"",no:this.json.no,key:this.json.key,sorting_index:this.json.sorting_index||"-",status:this.json.status,url_translations:this.json.url_translations}}}],[{key:"index",value:(o=Object(r.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)("get",Object(f.e)(f.a,"projects/".concat(n,"/menus")),{headers:Object(f.c)(!0)});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",Object(m.map)(r.data.menus,(function(menu,e){return menu.no=e+1,new t(menu)})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),function(t){return o.apply(this,arguments)})},{key:"show",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.d)("get",Object(f.e)(f.a,"projects/".concat(n,"/menus/").concat(r)),{headers:Object(f.c)(!0)});case 2:if(200!==(o=e.sent).status){e.next=5;break}return e.abrupt("return",new t(o.data.menu));case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(t,e){return n.apply(this,arguments)})},{key:"destroy",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(f.d)("delete",Object(f.e)(f.a,"projects/".concat(e,"/menus/").concat(n)),{headers:Object(f.c)(!0)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t,n){return e.apply(this,arguments)})}]),t}()},522:function(t,e,n){var content=n(646);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("61f83fd6",content,!0,{sourceMap:!1})},645:function(t,e,n){"use strict";n(522)},646:function(t,e,n){var r=n(22)(!1);r.push([t.i,".type[data-v-c1e018c0]{border:1px solid #dcdee2;border-radius:10px;color:#9a9a9a;display:flex;justify-content:center;align-items:center}[data-v-c1e018c0] .ivu-radio-group{display:flex;align-items:flex-end}@media screen and (max-width:830px){[data-v-c1e018c0] .ivu-radio-group{display:grid}}.box-type-01[data-v-c1e018c0]{width:65px;height:65px}.box-type-02[data-v-c1e018c0]{width:100px;height:100px}.box-type-03[data-v-c1e018c0]{width:100px;height:65px}.box-type-04[data-v-c1e018c0]{width:200px;height:65px}",""]),t.exports=r},795:function(t,e,n){"use strict";n.r(e);n(21),n(15),n(18),n(32),n(33);var r=n(7),o=n(4),c=(n(11),n(25),n(3)),menu=n(417);function l(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function m(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var f={props:{isNew:{type:Boolean,default:!1}},data:function(){return{formData:new menu.a,isLoading:!this.isNew,buttonTypes:[{value:"yes",en:"Yes",th:"ใช่"},{value:"no",en:"No",th:"ไม่"}],rules:{}}},computed:{goBackUrl:function(){return this.isNew?{name:"projects-projectId-menu_layouts",params:{projectId:this.$route.params.projectId}}:{name:"projects-projectId-menu_layouts-menuId-show",params:{projectId:this.$route.params.projectId,menuId:this.$route.params.menuId}}},language:function(){return this.$store.state.language.value},isOutApp:function(){return"no"===this.formData.json.is_in_app_menu}},watch:{language:function(){this.$store.state.isSelectLanguage&&this.$nextTick((function(){this.$refs.form&&this.$refs.form.validate()}))}},mounted:function(){this.isNew||this.fetchMenu()},methods:{fetchMenu:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,menu.a.show(t.$route.params.projectId,t.$route.params.menuId);case 3:n=e.sent,t.formData=n,t.formData.json.is_in_app_menu?t.formData.json.is_in_app_menu="yes":t.formData.json.is_in_app_menu="no",t.isLoading=!1;case 7:case"end":return e.stop()}}),e)})))()},updateFormData:function(t){this.formData.json=m(m({},this.formData.json),t)},handleSubmit:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("messages.confirm"),content:t.$t("messages.confirm_save"),okText:t.$t("button.yes"),cancelText:t.$t("button.no"),onOk:function(){t.submitForm()}})}))},submitForm:function(){var t=this;this.$refs.form.validate(function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=7;break}return t.isLoading=!0,e.next=4,t.formData.save(t.$route.params.projectId);case 4:(r=e.sent).data&&r.data.success?t.isNew?(t.$Message.success({content:t.$t("pages.menu_layout")+t.$t("messages.successfully_created"),duration:3}),t.$router.push({name:"projects-projectId-menu_layouts",params:{projectId:t.$route.params.projectId}})):(t.$Message.success({content:t.$t("pages.menu_layout")+t.$t("messages.successfully_updated"),duration:3}),t.$router.push({name:"projects-projectId-menu_layouts",params:{projectId:t.$route.params.projectId}})):(o=Object(c.snakeCase)(r.data.error),t.$Message.error({content:t.$t("messages.".concat(o)),duration:8})),t.isLoading=!1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},_=(n(645),n(9)),component=Object(_.a)(f,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoading?n("GLoading"):n("div",[n("GBreadCrumb",{attrs:{names:[t.formData.json.name_translations]}}),t._v(" "),n("Card",{attrs:{"dis-hover":"",bordered:!1}},[n("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.isNew?t.$t("button.new"):t.$t("button.edit"))+t._s(t.$t("pages.menu_layout"))+"\n    ")]),t._v(" "),n("Card",{attrs:{"dis-hover":"",bordered:!1}},[n("Row",{attrs:{type:"flex",justify:"center"}},[n("Col",{attrs:{xs:24,sm:13}},[n("Form",{ref:"form",attrs:{model:t.formData.json,rules:t.rules}},[n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"key",label:t.$t("form.menu.label.key"),rules:[{trigger:"blur,change",required:!0,message:t.$t("form.menu.label.key")+" "+t.$t("error.cannot_be_blank")}]}},[n("Input",{model:{value:t.formData.json.key,callback:function(e){t.$set(t.formData.json,"key",e)},expression:"formData.json.key"}})],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"is_in_app_menu",label:t.$t("form.menu.label.in_app_menu")}},[n("Select",{attrs:{placeholder:t.$t("form.menu.placeholder.in_app_menu")},model:{value:t.formData.json.is_in_app_menu,callback:function(e){t.$set(t.formData.json,"is_in_app_menu",e)},expression:"formData.json.is_in_app_menu"}},t._l(t.buttonTypes,(function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e[t.language]))])})),1)],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"name_translations.th",label:t.$t("form.menu.label.name_th")}},[n("Input",{attrs:{type:"text",placeholder:t.$t("form.menu.placeholder.name_th")},model:{value:t.formData.json.name_translations.th,callback:function(e){t.$set(t.formData.json.name_translations,"th",e)},expression:"formData.json.name_translations.th"}})],1),t._v(" "),n("FormItem",{directives:[{name:"show",rawName:"v-show",value:"no"===t.formData.json.is_in_app_menu||!t.formData.json.is_in_app_menu,expression:"\n                formData.json.is_in_app_menu === 'no' ||\n                !formData.json.is_in_app_menu\n              "}],staticClass:"font-weight-bold",attrs:{prop:"url_translations.th",label:t.$t("form.menu.label.url_th"),rules:[{trigger:"blur,change",required:t.isOutApp,message:t.$t("form.menu.label.url_th")+" "+t.$t("error.cannot_be_blank")}]}},[n("Input",{attrs:{type:"text",placeholder:t.$t("form.menu.placeholder.url_th")},model:{value:t.formData.json.url_translations.th,callback:function(e){t.$set(t.formData.json.url_translations,"th",e)},expression:"formData.json.url_translations.th"}})],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"name_translations.en",label:t.$t("form.menu.label.name_en")}},[n("Input",{attrs:{type:"text",placeholder:t.$t("form.menu.placeholder.name_en")},model:{value:t.formData.json.name_translations.en,callback:function(e){t.$set(t.formData.json.name_translations,"en",e)},expression:"formData.json.name_translations.en"}})],1),t._v(" "),n("FormItem",{directives:[{name:"show",rawName:"v-show",value:"no"===t.formData.json.is_in_app_menu||!t.formData.json.is_in_app_menu,expression:"\n                formData.json.is_in_app_menu === 'no' ||\n                !formData.json.is_in_app_menu\n              "}],staticClass:"font-weight-bold",attrs:{prop:"url_translations.en",label:t.$t("form.menu.label.url_en"),rules:[{trigger:"blur,change",required:t.isOutApp,message:t.$t("form.menu.label.url_en")+" "+t.$t("error.cannot_be_blank")}]}},[n("Input",{attrs:{type:"text",placeholder:t.$t("form.menu.placeholder.url_en")},model:{value:t.formData.json.url_translations.en,callback:function(e){t.$set(t.formData.json.url_translations,"en",e)},expression:"formData.json.url_translations.en"}})],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"sorting_index",label:t.$t("form.menu.label.sorting_index")}},[n("Input",{attrs:{type:"text",placeholder:t.$t("form.menu.placeholder.sorting_index")},model:{value:t.formData.json.sorting_index,callback:function(e){t.$set(t.formData.json,"sorting_index",e)},expression:"formData.json.sorting_index"}})],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"button_color",label:t.$t("form.menu.label.button_color")}},[n("ColorPicker",{attrs:{size:"small",recommend:""},model:{value:t.formData.json.button_color,callback:function(e){t.$set(t.formData.json,"button_color",e)},expression:"formData.json.button_color"}})],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"font_color",label:t.$t("form.menu.label.font_color")}},[n("ColorPicker",{attrs:{size:"small",recommend:""},model:{value:t.formData.json.font_color,callback:function(e){t.$set(t.formData.json,"font_color",e)},expression:"formData.json.font_color"}})],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"background_image",label:t.$t("form.menu.label.wallpaper_image")}},[n("br"),t._v(" "),n("GUpload",{attrs:{small:"","field-key":"background_image"},on:{updateParentValue:t.updateFormData},model:{value:t.formData.json.background_image,callback:function(e){t.$set(t.formData.json,"background_image",e)},expression:"formData.json.background_image"}})],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"logo_image",label:t.$t("form.menu.label.logo_image")}},[n("br"),t._v(" "),n("GUpload",{attrs:{"field-key":"logo_image"},on:{updateParentValue:t.updateFormData},model:{value:t.formData.json.logo_image,callback:function(e){t.$set(t.formData.json,"logo_image",e)},expression:"formData.json.logo_image"}})],1),t._v(" "),n("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"menu_layout",label:t.$t("form.menu.label.menu_layout")}},[n("br"),n("br"),t._v(" "),n("RadioGroup",{model:{value:t.formData.json.menu_layout,callback:function(e){t.$set(t.formData.json,"menu_layout",e)},expression:"formData.json.menu_layout"}},[n("Radio",{attrs:{label:"01"}},[n("div",{staticClass:"type box-type-01"},[t._v("Type 01")])]),t._v(" "),n("Radio",{attrs:{label:"02"}},[n("div",{staticClass:"type box-type-02"},[t._v("Type 02")])]),t._v(" "),n("Radio",{attrs:{label:"03"}},[n("div",{staticClass:"type box-type-03"},[t._v("Type 03")])]),t._v(" "),n("Radio",{attrs:{label:"04"}},[n("div",{staticClass:"type box-type-04"},[t._v("Type 04")])])],1)],1),t._v(" "),n("br"),t._v(" "),n("FormItem",{attrs:{align:"center"}},[n("Button",{staticClass:"default-button button-grey",attrs:{to:t.goBackUrl}},[t._v("\n                "+t._s(t.$t("button.cancel"))+"\n              ")]),t._v(" "),n("Button",{staticClass:"default-button button-green",on:{click:function(e){return t.handleSubmit()}}},[t._v("\n                "+t._s(t.$t("button.save"))+"\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"c1e018c0",null);e.default=component.exports}}]);