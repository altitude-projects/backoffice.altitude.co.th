(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{410:function(t,e,r){"use strict";r.d(e,"a",(function(){return l}));var n=r(4),c=r(30),o=r(31),m=(r(25),r(3)),d=r(6),f=r(5),l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.json=e}var e,r,l,h,j,v;return Object(o.a)(t,[{key:"save",value:(v=Object(n.a)(regeneratorRuntime.mark((function t(e){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,n=Object(f.e)(this.json,"unitType"),!this.json.id){t.next=8;break}return t.next=5,Object(d.d)("patch",Object(d.e)(d.a,"projects/".concat(e,"/asset_types/").concat(this.json.id)),{headers:Object(d.c)(!0),data:n});case 5:r=t.sent,t.next=11;break;case 8:return t.next=10,Object(d.d)("post",Object(d.e)(d.a,"projects/".concat(e,"/asset_types")),{headers:Object(d.c)(!0),data:n});case 10:r=t.sent;case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"activate",value:(j=Object(n.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.d)("patch",Object(d.e)(d.a,"projects/".concat(e,"/asset_types/").concat(this.json.id,"/activate")),{headers:Object(d.c)(!0)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return j.apply(this,arguments)})},{key:"inactivate",value:(h=Object(n.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.d)("patch",Object(d.e)(d.a,"projects/".concat(e,"/asset_types/").concat(this.json.id,"/inactivate")),{headers:Object(d.c)(!0)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})}],[{key:"unitTypeForSelect",value:(l=Object(n.a)(regeneratorRuntime.mark((function t(e){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.d)("get",Object(d.e)(d.a,"projects/".concat(e,"/asset_types/asset_types_for_select")),{headers:Object(d.c)(!0)});case 2:if(200!==(r=t.sent).status){t.next=5;break}return t.abrupt("return",r.data.asset_types);case 5:case"end":return t.stop()}}),t)}))),function(t){return l.apply(this,arguments)})},{key:"index",value:(r=Object(n.a)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)("get",Object(d.e)(d.a,"projects/".concat(r,"/asset_types")),{headers:Object(d.c)(!0)});case 2:if(200!==(n=e.sent).status){e.next=5;break}return e.abrupt("return",Object(m.map)(n.data.asset_types,(function(e,r){return e.no=r+1,new t(e,r)})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),function(t){return r.apply(this,arguments)})},{key:"show",value:(e=Object(n.a)(regeneratorRuntime.mark((function e(r,n){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.d)("get",Object(d.e)(d.a,"projects/".concat(r,"/asset_types/").concat(n)),{headers:Object(d.c)(!0)});case 2:if(200!==(c=e.sent).status){e.next=5;break}return e.abrupt("return",new t(c.data.asset_type));case 5:case"end":return e.stop()}}),e)}))),function(t,r){return e.apply(this,arguments)})}]),t}()},802:function(t,e,r){"use strict";r.r(e);var n=r(4),c=(r(25),r(16),r(11),r(410)),o={props:{isNew:{type:Boolean,default:!1}},data:function(){return{formData:new c.a,isLoading:!this.isNew,rules:{name:[{required:!0,message:this.$t("form.unit_type.label.type_name")+" "+this.$t("error.cannot_be_blank"),trigger:"blur,change"}]}}},computed:{language:function(){return this.$store.state.language.value}},watch:{language:function(){this.rules.name[0].message=this.$t("form.unit_type.label.type_name")+" "+this.$t("error.cannot_be_blank"),this.$store.state.isSelectLanguage&&this.$nextTick((function(){this.$refs.form&&this.$refs.form.validate()}))}},mounted:function(){this.isNew||this.fetchUnitType()},methods:{fetchUnitType:function(){var t=this;return Object(n.a)(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,c.a.show(t.$route.params.projectId,t.$route.params.unitTypeId);case 3:r=e.sent,t.formData=r,t.isLoading=!1;case 6:case"end":return e.stop()}}),e)})))()},handleSubmit:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("messages.are_you_sure"),content:t.$t("messages.confirm_save"),okText:t.$t("button.yes"),cancelText:t.$t("button.no"),onOk:function(){t.submitForm()}})}))},submitForm:function(){var t=this;this.$refs.form.validate(function(){var e=Object(n.a)(regeneratorRuntime.mark((function e(r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r){e.next=5;break}return e.next=3,t.formData.save(t.$route.params.projectId);case 3:(n=e.sent).data&&n.data.success&&(t.isNew?(t.$Message.success({content:t.$t("pages.unit_type")+t.$t("messages.successfully_created"),duration:8}),t.$router.push({name:"projects-projectId-unit_types",params:{projectId:t.$route.params.projectId}})):(t.$Message.success({content:t.$t("pages.unit_type")+t.$t("messages.successfully_updated"),duration:8}),t.$router.push({name:"projects-projectId-unit_types",params:{projectId:t.$route.params.projectId}})));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}},m=r(9),component=Object(m.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.isLoading?r("GLoading"):r("div",[r("GBreadCrumb",{attrs:{names:[t.formData.json.name]}}),t._v(" "),r("Card",{attrs:{"dis-hover":"",bordered:!1}},[r("p",{attrs:{slot:"title"},slot:"title"},[t._v("\n      "+t._s(t.isNew?t.$t("button.new"):t.$t("button.edit"))+t._s(t.$t("pages.unit_type"))+"\n    ")]),t._v(" "),r("Card",{attrs:{"dis-hover":"",bordered:!1}},[r("Row",{attrs:{type:"flex",justify:"center"}},[r("Col",{attrs:{xs:24,sm:13}},[r("Form",{ref:"form",attrs:{model:t.formData.json,rules:t.rules}},[r("FormItem",{staticClass:"font-weight-bold",attrs:{prop:"name",label:t.$t("form.unit_type.label.type_name")}},[r("Input",{attrs:{type:"text",placeholder:t.$t("form.unit_type.placeholder.type_name")},model:{value:t.formData.json.name,callback:function(e){t.$set(t.formData.json,"name",e)},expression:"formData.json.name"}})],1),t._v(" "),r("FormItem",{staticClass:"font-weight-bold",attrs:{align:"center"}},[r("Button",{staticClass:"default-button button-grey",attrs:{to:{name:"projects-projectId-unit_types",params:{projectId:t.$route.params.projectId}}}},[t._v("\n                "+t._s(t.$t("button.cancel"))+"\n              ")]),t._v(" "),r("Button",{staticClass:"default-button button-green",on:{click:function(e){return t.handleSubmit()}}},[t._v("\n                "+t._s(t.$t("button.save"))+"\n              ")])],1)],1)],1)],1)],1)],1)],1)}),[],!1,null,"4d23c2e6",null);e.default=component.exports}}]);