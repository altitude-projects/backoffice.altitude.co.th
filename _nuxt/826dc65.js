(window.webpackJsonp=window.webpackJsonp||[]).push([[72],{420:function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var r=n(4),c=n(30),o=n(31),d=(n(25),n(3)),l=n(6),f=n(5),m=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.json=e,this.json.name_translations=e.name_translations||{en:"",th:""},this.json.description_translations=e.description_translations||{en:"",th:""},this.json.brand_translations=e.brand_translations||{en:"",th:""}}var e,n,m,h,j;return Object(o.a)(t,[{key:"save",value:(j=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null,c=Object(f.e)(this.json,"assetSupply"),c=Object(f.n)(c,"asset_supply",["image"]),!this.json.id){t.next=9;break}return t.next=6,Object(l.d)("patch",Object(l.e)(l.a,"projects/".concat(e,"/assets/").concat(n,"/asset_supplies/").concat(this.json.id)),{data:c,headers:Object(l.c)(!0)});case 6:r=t.sent,t.next=12;break;case 9:return t.next=11,Object(l.d)("post",Object(l.e)(l.a,"projects/".concat(e,"/assets/").concat(n,"/asset_supplies")),{data:c,headers:Object(l.c)(!0)});case 11:r=t.sent;case 12:return t.abrupt("return",r);case 13:case"end":return t.stop()}}),t,this)}))),function(t,e){return j.apply(this,arguments)})},{key:"activate",value:(h=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.d)("patch",Object(l.e)(l.a,"projects/".concat(e,"/assets/").concat(n,"/asset_supplies/").concat(this.json.id,"/activate")),{headers:Object(l.c)(!0)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return h.apply(this,arguments)})},{key:"inactivate",value:(m=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(l.d)("patch",Object(l.e)(l.a,"projects/".concat(e,"/assets/").concat(n,"/asset_supplies/").concat(this.json.id,"/inactivate")),{headers:Object(l.c)(!0)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t,this)}))),function(t,e){return m.apply(this,arguments)})},{key:"asTableJson",value:function(){return{id:this.json.id,name_translations:this.json.name_translations||"-",supply_category:this.json.supply_category,description_translations:this.json.description_translations||"-",setup_datetime:this.json.setup_datetime?Object(f.g)(this.json.setup_datetime):"-",warranty_expired_datetime:this.json.warranty_expired_datetime?Object(f.g)(this.json.warranty_expired_datetime):"-",last_maintenance:this.json.maintenance_datetime?Object(f.g)(this.json.maintenance_datetime):"-",status:this.json.status||"-"}}}],[{key:"index",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(n,r){var c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)("get",Object(l.e)(l.a,"projects/".concat(n,"/assets/").concat(r,"/asset_supplies")),{headers:Object(l.c)(!0)});case 2:if(200!==(c=e.sent).status){e.next=5;break}return e.abrupt("return",Object(d.map)(c.data.asset_supplies,(function(e,n){return new t(e)})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),function(t,e){return n.apply(this,arguments)})},{key:"show",value:(e=Object(r.a)(regeneratorRuntime.mark((function e(n,r,c){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(l.d)("get",Object(l.e)(l.a,"projects/".concat(n,"/assets/").concat(r,"/asset_supplies/").concat(c)),{headers:Object(l.c)(!0)});case 2:if(200!==(o=e.sent).status){e.next=5;break}return e.abrupt("return",new t(o.data.asset_supply));case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(t,n,r){return e.apply(this,arguments)})}]),t}()},551:function(t,e,n){"use strict";n.r(e);var r=n(4),c=(n(11),n(25),n(420)),o={props:{items:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!0}},data:function(){var t=this;return{columns:[{slot:"name",width:170,renderHeader:function(e,n){return e("span","".concat(t.$t("info.device.label.name")))}},{slot:"supply_category",width:170,renderHeader:function(e,n){return e("span","".concat(t.$t("info.device.label.type")))}},{slot:"details",width:140,renderHeader:function(e,n){return e("span","".concat(t.$t("info.device.label.details")))}},{key:"setup_datetime",align:"center",width:200,renderHeader:function(e,n){return e("span","".concat(t.$t("info.device.label.setup_datetime")))}},{key:"warranty_expired_datetime",align:"center",width:220,renderHeader:function(e,n){return e("span","".concat(t.$t("info.device.label.warranty_expired_datetime")))}},{key:"last_maintenance",align:"center",width:200,renderHeader:function(e,n){return e("span","".concat(t.$t("info.device.label.last_maintenance")))}},{slot:"action",align:"center",width:100,renderHeader:function(e,n){return e("span","".concat(t.$t("info.device.label.action")))}}]}},mounted:function(){},methods:{changeStatus:function(data){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new c.a(data),"active"!==data.status){e.next=7;break}return e.next=4,r.inactivate();case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,r.activate();case 9:n=e.sent;case 10:n&&n.data.success?(o=n.data.admin.status,t.$Message.success({content:t.$t("messages.successfully_"+o),duration:3})):n.data&&n.data.error?t.$Message.error({content:n.data.error,duration:8}):t.$Message.error({content:t.$t("messages.fail"),duration:8}),t.$emit("reloadData");case 12:case"end":return e.stop()}}),e)})))()},handleBeforeChange:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("pages.confirm"),content:t.$t("messages.confirm_change_status"),okText:t.$t("button.ok"),cancelText:t.$t("button.cancel"),onOk:function(){e()}})}))},statusSetting:function(t){return"active"===t}}},d=n(9),component=Object(d.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{attrs:{columns:t.columns,data:t.items,loading:t.loading,"no-data-text":t.$t("pages.no_data")},scopedSlots:t._u([{key:"name",fn:function(e){var r=e.row;return[n("nuxt-link",{attrs:{to:{name:"projects-projectId-units-unitId-devices-deviceId-show",params:{projectId:t.$route.params.projectId,unitId:t.$route.params.unitId,deviceId:r.id}}}},[t._v("\n        "+t._s(r.name_translations[t.$store.state.language.value])+"\n      ")])]}},{key:"supply_category",fn:function(e){var n=e.row;return[t._v("\n      "+t._s(n.supply_category?t.$t("info.device.label."+n.supply_category):"-")+"\n    ")]}},{key:"details",fn:function(e){var n=e.row;return[t._v("\n      "+t._s(n.description_translations[t.$store.state.language.value]||"-")+"\n    ")]}},{key:"action",fn:function(e){var r=e.row;return[n("Tooltip",{attrs:{content:t.$t("button.edit"),placement:"top"}},[n("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"ios-create-outline",size:"20"},on:{click:function(e){return t.$router.push({name:"projects-projectId-units-unitId-devices-deviceId-edit",params:{projectId:t.$route.params.projectId,unitId:t.$route.params.unitId,deviceId:r.id}})}}})],1)]}}])})],1)}),[],!1,null,"4323e238",null);e.default=component.exports}}]);