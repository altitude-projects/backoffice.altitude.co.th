(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{417:function(t,e,n){"use strict";n.d(e,"a",(function(){return j}));n(21),n(15),n(18),n(32),n(33);var r=n(4),o=n(7),c=n(30),l=n(31),d=(n(25),n(3)),h=n(6),m=n(5);function f(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function _(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?f(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):f(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var j=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.json=_(_({},e),{},{name_translations:e.name_translations||{en:"",th:""},url_translations:e.url_translations||{en:"",th:""},menu_layout:e.menu_layout||"01",font_color:e.font_color||"#fff",button_color:e.button_color||"#fff"})}var e,n,o,f,j,x;return Object(l.a)(t,[{key:"save",value:(x=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,(r=Object(d.cloneDeep)(this.json)).is_in_app_menu="yes"===r.is_in_app_menu,o=Object(m.e)(r,"menu"),o=Object(m.n)(o,"menu",["logo_image","background_image"]),!this.json.id){t.next=11;break}return t.next=8,Object(h.d)("patch",Object(h.e)(h.a,"projects/".concat(e,"/menus/").concat(this.json.id)),{data:o,headers:Object(h.c)(!0)});case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,Object(h.d)("post",Object(h.e)(h.a,"projects/".concat(e,"/menus")),{data:o,headers:Object(h.c)(!0)});case 13:n=t.sent;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return x.apply(this,arguments)})},{key:"activate",value:(j=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.d)("patch",Object(h.e)(h.a,"projects/".concat(e,"/menus/").concat(this.json.id,"/activate")),{headers:Object(h.c)(!0)});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return j.apply(this,arguments)})},{key:"inactivate",value:(f=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.d)("patch",Object(h.e)(h.a,"projects/".concat(e,"/menus/").concat(this.json.id,"/inactivate")),{headers:Object(h.c)(!0)});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return f.apply(this,arguments)})},{key:"asInfoJson",value:function(){return{id:this.json.id,key:this.json.key,name_en:this.json.name_translations?this.json.name_translations.en:"-",name_th:this.json.name_translations?this.json.name_translations.th:"-",url_en:this.json.url_translations?this.json.url_translations.en:"-",url_th:this.json.url_translations?this.json.url_translations.th:"-",sorting_index:this.json.sorting_index?this.json.sorting_index:"-",button_color:this.json.button_color?this.json.button_color:"-",font_color:this.json.font_color?this.json.font_color:"-",background_image:this.json.background_image?this.json.background_image:null,logo_image:this.json.logo_image?this.json.logo_image:null,menu_layout:this.json.menu_layout?this.json.menu_layout:"-"}}},{key:"asTableJson",value:function(){return{created_at:this.json.created_at,id:this.json.id,button_color:this.json.button_color||"",font_color:this.json.font_color||"#000000",menu_layout:this.json.menu_layout,logo_image:this.json.logo_image,background_image:this.json.background_image||"",name_en:this.json.name_translations.en||"",name_th:this.json.name_translations.th||"",no:this.json.no,key:this.json.key,sorting_index:this.json.sorting_index||"-",status:this.json.status,url_translations:this.json.url_translations}}}],[{key:"index",value:(o=Object(r.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)("get",Object(h.e)(h.a,"projects/".concat(n,"/menus")),{headers:Object(h.c)(!0)});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",Object(d.map)(r.data.menus,(function(menu,e){return menu.no=e+1,new t(menu)})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),function(t){return o.apply(this,arguments)})},{key:"show",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.d)("get",Object(h.e)(h.a,"projects/".concat(n,"/menus/").concat(r)),{headers:Object(h.c)(!0)});case 2:if(200!==(o=e.sent).status){e.next=5;break}return e.abrupt("return",new t(o.data.menu));case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(t,e){return n.apply(this,arguments)})},{key:"destroy",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(h.d)("delete",Object(h.e)(h.a,"projects/".concat(e,"/menus/").concat(n)),{headers:Object(h.c)(!0)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t,n){return e.apply(this,arguments)})}]),t}()},497:function(t,e,n){var content=n(598);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("41dd313c",content,!0,{sourceMap:!1})},597:function(t,e,n){"use strict";n(497)},598:function(t,e,n){var r=n(22)(!1);r.push([t.i,".menu-layout-block my-10 mx-5[data-v-4dbfeeb4]{background:#fff;border-radius:8px;color:#ba6b57}.font-image-text[data-v-4dbfeeb4]{font-size:10px;font-weight:700;overflow:hidden;text-overflow:ellipsis}[data-v-4dbfeeb4] .ivu-card-body{padding-top:0}.one-line-text[data-v-4dbfeeb4]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}",""]),t.exports=r},737:function(t,e,n){"use strict";n.r(e);var r=n(4),o=(n(25),n(3)),menu=n(417),c={data:function(){return{isLoading:!0,menus:[],appMenus:[],languages:[{label:this.$t("button.th"),value:"th"},{label:this.$t("button.en"),value:"en"}],selectLanguage:this.$store.state.language.value,windowHeight:530,windowWidth:250}},computed:{storeLanguage:function(){return this.$store.state.language.value}},watch:{storeLanguage:function(t){this.languages=[],this.languages.push({label:this.$t("button.th"),value:"th"},{label:this.$t("button.en"),value:"en"}),this.selectLanguage=t}},mounted:function(){this.fetchMenus()},methods:{checkBoxStyle:function(menu){return"01"===menu.menu_layout?"width: 65px; height: 65px;\n        background:".concat(menu.button_color,";\n        color:").concat(menu.font_color,";background-size:100px;\n        text-align: center;\n        border-radius:5px;\n        background-repeat:round;\n        background-size:auto;\n        backgroundImage:url('").concat(menu.background_image.url||"","')"):"02"===menu.menu_layout?"width: 100px; height: 100px;\n        background:".concat(menu.button_color,";\n        color:").concat(menu.font_color,";background-size:100px;\n        text-align: center;\n        border-radius:5px;\n        background-repeat:round;\n        background-size:auto;\n        backgroundImage:url('").concat(menu.background_image.url||"","')"):"03"===menu.menu_layout?"width: 100px; height: 65px;\n        background:".concat(menu.button_color,";color:").concat(menu.font_color,";\n        text-align: center;\n        background-size:100px;\n        background-size:auto;\n        border-radius:5px;\n        background-repeat:round;\n        backgroundImage:url('").concat(menu.background_image.url||"","')"):"\n        width: 100%; height: 65px;\n        background:".concat(menu.button_color,";\n        color:").concat(menu.font_color,";\n        text-align: center;\n        border-radius:5px;\n        background-position:center;\n        background-size:cover;\n        backgroundImage:url('").concat(menu.background_image.url||"","')")},fetchMenus:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.isLoading=!0,e.next=3,menu.a.index(t.$route.params.projectId);case 3:n=e.sent,t.menus=Object(o.map)(n,(function(menu){return menu.asTableJson()})),t.appMenus=Object(o.filter)(t.menus,["status","active"]),t.isLoading=!1;case 7:case"end":return e.stop()}}),e)})))()}}},l=(n(597),n(9)),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{staticClass:"ma-20"},[t._v(t._s(t.$t("pages.menu_layout")))]),t._v(" "),t.isLoading?n("GLoading"):n("Row",{attrs:{type:"flex",gutter:24,justify:"center"}},[n("Col",{staticClass:"mb-20",style:"width: "+(t.windowWidth+60)+"px;height:100%;",attrs:{md:9,sm:24}},[n("Row",{staticClass:"pa-2 py-8",staticStyle:{padding:"15px","margin-left":"31px","margin-right":"-12px",position:"absolute",width:"224px",background:"rgb(250, 250, 250)",top:"1px","z-index":"1"},attrs:{type:"flex",justify:"end",align:"middle",gutter:24}},[n("Col",[t._v("\n          "+t._s(t.$t("messages.language"))+"\n        ")]),t._v(" "),n("Col",[n("Select",{model:{value:t.selectLanguage,callback:function(e){t.selectLanguage=e},expression:"selectLanguage"}},t._l(t.languages,(function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v("\n              "+t._s(e.label)+"\n            ")])})),1)],1)],1),t._v(" "),n("Card",{staticClass:"pa-0",staticStyle:{"border-radius":"30px","background-color":"#fafafa",height:"520px","overflow-y":"auto"},attrs:{"dis-hover":""}},[n("Row",{staticClass:"pt-70 pb-20 px-15",attrs:{type:"flex",align:"top",justify:"space-between"}},t._l(t.appMenus,(function(menu,e){return n("Row",{key:e,staticStyle:{"margin-top":"10px","maring-left":"10px"},style:t.checkBoxStyle(menu),attrs:{type:"flex",align:"middle",justify:"center"}},[n("Col",{staticClass:"pa-10 menu-layout-block font-image-text"},[menu.logo_image&&menu.logo_image.id?n("span",[n("img",{attrs:{src:menu.logo_image.url,width:"20"}}),t._v(" "),n("div",{staticClass:"one-line-text"},[t._v("\n                  "+t._s(menu["name_"+t.selectLanguage])+"\n                ")])]):n("span",{staticClass:"one-line-text"},[t._v("\n                "+t._s(menu["name_"+t.selectLanguage])+"\n              ")])])],1)})),1)],1),t._v(" "),n("Row",{staticClass:"pa-2 py-8",staticStyle:{position:"absolute",width:"237px",background:"rgb(250, 250, 250)",bottom:"1px",height:"40px",right:"35px"},attrs:{type:"flex",justify:"center"}})],1),t._v(" "),n("Col",{attrs:{xs:24,md:14,sm:24}},[n("GIndexPage",{attrs:{items:t.menus,"show-sizer":"",loading:t.isLoading,"new-button-name":t.$t("button.button"),component:"GMenuTable","new-url":{name:"projects-projectId-menu_layouts-new",params:{projectId:t.$route.params.projectId}}},on:{reloadData:t.fetchMenus}})],1)],1)],1)}),[],!1,null,"4dbfeeb4",null);e.default=component.exports}}]);