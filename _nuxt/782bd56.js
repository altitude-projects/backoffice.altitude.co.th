(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{414:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(4),c=n(30),o=n(31),d=(n(25),n(3)),j=n(6),h=n(5),f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,e),this.json=t,this.json.name_translations=t.name_translations||{en:"",th:""}}var t,n,f,l,m;return Object(o.a)(e,[{key:"save",value:(m=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var r,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null,c=Object(h.e)(this.json,"incidentTypes"),c=Object(h.n)(c,"incident_type"),!n){e.next=10;break}return e.next=6,Object(j.d)("patch",Object(j.e)(j.a,"projects/".concat(t,"/incident_types/").concat(n)),{data:c,headers:Object(j.c)(!0)});case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.next=12,Object(j.d)("post",Object(j.e)(j.a,"projects/".concat(t,"/incident_types")),{data:c,headers:Object(j.c)(!0)});case 12:return r=e.sent,e.abrupt("return",r);case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return m.apply(this,arguments)})},{key:"activate",value:(l=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.d)("patch",Object(j.e)(j.a,"projects/".concat(t,"/incident_types/").concat(n,"/activate")),{headers:Object(j.c)(!0)});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return l.apply(this,arguments)})},{key:"inactivate",value:(f=Object(r.a)(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(j.d)("patch",Object(j.e)(j.a,"projects/".concat(t,"/incident_types/").concat(n,"/inactivate")),{headers:Object(j.c)(!0)});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)}))),function(e,t){return f.apply(this,arguments)})},{key:"asTableJson",value:function(){return{no:this.json.no,created_at:this.json.created_at,id:this.json.id,key:this.json.key,name_translations:this.json.name_translations,sorting_index:this.json.sorting_index?parseFloat(this.json.sorting_index).toFixed(1):"-",status:this.json.status}}}],[{key:"index",value:(n=Object(r.a)(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.d)("get",Object(j.e)(j.a,"projects/".concat(n,"/incident_types")),{headers:Object(j.c)(!0)});case 2:if(200!==(r=t.sent).status){t.next=5;break}return t.abrupt("return",Object(d.map)(r.data.incident_types,(function(t){return new e(t)})));case 5:return t.abrupt("return",[]);case 6:case"end":return t.stop()}}),t)}))),function(e){return n.apply(this,arguments)})},{key:"show",value:(t=Object(r.a)(regeneratorRuntime.mark((function t(n,r){var c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(j.d)("get",Object(j.e)(j.a,"projects/".concat(n,"/incident_types/").concat(r)),{headers:Object(j.c)(!0)});case 2:if(200!==(c=t.sent).status){t.next=5;break}return t.abrupt("return",new e(c.data.incident_type));case 5:return t.abrupt("return",c);case 6:case"end":return t.stop()}}),t)}))),function(e,n){return t.apply(this,arguments)})}]),e}()},735:function(e,t,n){"use strict";n.r(t);var r=n(4),c=(n(25),n(3)),o=n(414),d={data:function(){return{incidentTypes:[],loading:!1,isLoading:!0,currentPage:1,pageSize:10}},mounted:function(){this.fetchIncidents()},methods:{fetchItems:function(e,t){this.currentPage=e,this.pageSize=t,this.fetchIncidents(!0)},fetchIncidents:function(e){var t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e?t.isLoading=!0:t.loading=!0,n.next=3,o.a.index(t.$route.params.projectId);case 3:r=n.sent,t.incidentTypes=Object(c.map)(r,(function(e,t){return e.json.no=t+1,e.asTableJson()})),t.isLoading=!1,t.loading=!1;case 7:case"end":return n.stop()}}),n)})))()}}},j=n(9),component=Object(j.a)(d,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.isLoading?n("GLoading"):n("Card",{attrs:{"dis-hover":"",bordered:!1}},[n("div",{attrs:{slot:"title"},slot:"title"},[n("h3",[e._v("\n        "+e._s(e.$t("pages.incident_types"))+"\n      ")])]),e._v(" "),n("GIndexPage",{attrs:{items:e.incidentTypes,"show-sizer":"",loading:e.loading,"new-button-name":e.$t("pages.incident_type"),component:"GIncidentTypeTable","new-url":{name:"projects-projectId-incident_types-new",params:{projectId:e.$route.params.projectId}}},on:{reloadData:e.fetchIncidents,pageAndItemPerPage:e.fetchItems}})],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);