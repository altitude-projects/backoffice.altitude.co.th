(window.webpackJsonp=window.webpackJsonp||[]).push([[79],{417:function(t,e,n){"use strict";n.d(e,"a",(function(){return _}));n(21),n(15),n(18),n(32),n(33);var r=n(4),o=n(7),c=n(30),l=n(31),d=(n(25),n(3)),m=n(6),f=n(5);function h(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function j(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var _=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(this,t),this.json=j(j({},e),{},{name_translations:e.name_translations||{en:"",th:""},url_translations:e.url_translations||{en:"",th:""},menu_layout:e.menu_layout||"01",font_color:e.font_color||"#fff",button_color:e.button_color||"#fff"})}var e,n,o,h,_,v;return Object(l.a)(t,[{key:"save",value:(v=Object(r.a)(regeneratorRuntime.mark((function t(e){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=null,(r=Object(d.cloneDeep)(this.json)).is_in_app_menu="yes"===r.is_in_app_menu,o=Object(f.e)(r,"menu"),o=Object(f.n)(o,"menu",["logo_image","background_image"]),!this.json.id){t.next=11;break}return t.next=8,Object(m.d)("patch",Object(m.e)(m.a,"projects/".concat(e,"/menus/").concat(this.json.id)),{data:o,headers:Object(m.c)(!0)});case 8:n=t.sent,t.next=14;break;case 11:return t.next=13,Object(m.d)("post",Object(m.e)(m.a,"projects/".concat(e,"/menus")),{data:o,headers:Object(m.c)(!0)});case 13:n=t.sent;case 14:return t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,this)}))),function(t){return v.apply(this,arguments)})},{key:"activate",value:(_=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.d)("patch",Object(m.e)(m.a,"projects/".concat(e,"/menus/").concat(this.json.id,"/activate")),{headers:Object(m.c)(!0)});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return _.apply(this,arguments)})},{key:"inactivate",value:(h=Object(r.a)(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.d)("patch",Object(m.e)(m.a,"projects/".concat(e,"/menus/").concat(this.json.id,"/inactivate")),{headers:Object(m.c)(!0)});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)}))),function(t){return h.apply(this,arguments)})},{key:"asInfoJson",value:function(){return{id:this.json.id,key:this.json.key,name_en:this.json.name_translations?this.json.name_translations.en:"-",name_th:this.json.name_translations?this.json.name_translations.th:"-",url_en:this.json.url_translations?this.json.url_translations.en:"-",url_th:this.json.url_translations?this.json.url_translations.th:"-",sorting_index:this.json.sorting_index?this.json.sorting_index:"-",button_color:this.json.button_color?this.json.button_color:"-",font_color:this.json.font_color?this.json.font_color:"-",background_image:this.json.background_image?this.json.background_image:null,logo_image:this.json.logo_image?this.json.logo_image:null,menu_layout:this.json.menu_layout?this.json.menu_layout:"-"}}},{key:"asTableJson",value:function(){return{created_at:this.json.created_at,id:this.json.id,button_color:this.json.button_color||"",font_color:this.json.font_color||"#000000",menu_layout:this.json.menu_layout,logo_image:this.json.logo_image,background_image:this.json.background_image||"",name_en:this.json.name_translations.en||"",name_th:this.json.name_translations.th||"",no:this.json.no,key:this.json.key,sorting_index:this.json.sorting_index||"-",status:this.json.status,url_translations:this.json.url_translations}}}],[{key:"index",value:(o=Object(r.a)(regeneratorRuntime.mark((function e(n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("get",Object(m.e)(m.a,"projects/".concat(n,"/menus")),{headers:Object(m.c)(!0)});case 2:if(200!==(r=e.sent).status){e.next=5;break}return e.abrupt("return",Object(d.map)(r.data.menus,(function(menu,e){return menu.no=e+1,new t(menu)})));case 5:return e.abrupt("return",[]);case 6:case"end":return e.stop()}}),e)}))),function(t){return o.apply(this,arguments)})},{key:"show",value:(n=Object(r.a)(regeneratorRuntime.mark((function e(n,r){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(m.d)("get",Object(m.e)(m.a,"projects/".concat(n,"/menus/").concat(r)),{headers:Object(m.c)(!0)});case 2:if(200!==(o=e.sent).status){e.next=5;break}return e.abrupt("return",new t(o.data.menu));case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),function(t,e){return n.apply(this,arguments)})},{key:"destroy",value:(e=Object(r.a)(regeneratorRuntime.mark((function t(e,n){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.d)("delete",Object(m.e)(m.a,"projects/".concat(e,"/menus/").concat(n)),{headers:Object(m.c)(!0)});case 2:return r=t.sent,t.abrupt("return",r);case 4:case"end":return t.stop()}}),t)}))),function(t,n){return e.apply(this,arguments)})}]),t}()},436:function(t,e,n){var content=n(467);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(23).default)("44a2ea10",content,!0,{sourceMap:!1})},466:function(t,e,n){"use strict";n(436)},467:function(t,e,n){var r=n(22)(!1);r.push([t.i,".ivu-tooltip[data-v-509aa461] .ivu-tooltip-inner{max-width:none}",""]),t.exports=r},557:function(t,e,n){"use strict";n.r(e);var r=n(4),menu=(n(11),n(25),n(417)),o={props:{items:{type:Array,default:function(){return[]}},loading:{type:Boolean,default:!0}},data:function(){var t=this;return{editImage:"",columns:[{key:"no",width:70,align:"center",renderHeader:function(e,n){return e("span","".concat(t.$t("info.menu.label.no")))}},{slot:"key",width:120,align:"center",renderHeader:function(e,n){return e("span","".concat(t.$t("info.menu.label.key")))}},{slot:"name_en",width:150,renderHeader:function(e,n){return e("span","".concat(t.$t("info.menu.label.button_name_en")))}},{slot:"name_th",width:150,renderHeader:function(e,n){return e("span","".concat(t.$t("info.menu.label.button_name_th")))}},{key:"sorting_index",width:100,align:"right",renderHeader:function(e,n){return e("span","".concat(t.$t("info.menu.label.sorting_index")))}},{slot:"status",align:"center",width:80,renderHeader:function(e,n){return e("span","".concat(t.$t("info.menu.label.status")))}},{slot:"action",align:"center",width:100,renderHeader:function(e,n){return e("span","".concat(t.$t("info.menu.label.action")))}}]}},mounted:function(){},methods:{changeStatus:function(data){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=new menu.a(data),"active"!==data.status){e.next=7;break}return e.next=4,r.inactivate(t.$route.params.projectId);case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,r.activate(t.$route.params.projectId);case 9:n=e.sent;case 10:n&&200===n.status?(o=n.data.menu.status,t.$Message.success({content:t.$t("messages.successfully_"+o),duration:3})):n.data&&n.data.error?t.$Message.error({content:n.data.error,duration:8}):t.$Message.error({content:t.$t("messages.fail"),duration:8}),t.$emit("reloadData");case 12:case"end":return e.stop()}}),e)})))()},handleBeforeChange:function(){var t=this;return new Promise((function(e){t.$Modal.confirm({title:t.$t("pages.confirm"),content:t.$t("messages.confirm_change_status"),okText:t.$t("button.ok"),cancelText:t.$t("button.cancel"),onOk:function(){e()}})}))},statusSetting:function(t){return"active"===t},handleRemove:function(t){var e=this;return new Promise((function(n){e.$Modal.confirm({title:e.$t("pages.confirm"),content:e.$t("messages.confirm_remove"),okText:e.$t("button.yes"),cancelText:e.$t("button.no"),onOk:function(){e.removeMenu(t.id)}})}))},removeMenu:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,menu.a.destroy(e.$route.params.projectId,t);case 2:200===(r=n.sent).status?(e.$Message.success({content:e.$t("messages.successfully_remove"),duration:3}),e.$emit("reloadData")):r.data&&r.data.error?"Can not delete this menu."===r.data.error?e.$Message.error({content:e.$t("messages.cannot_delete_this_menu"),duration:8}):e.$Message.error({content:r.data.error,duration:8}):e.$Message.error({content:e.$t("messages.fail"),duration:8}),e.$emit("reloadData");case 5:case"end":return n.stop()}}),n)})))()}}},c=(n(466),n(9)),component=Object(c.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Table",{attrs:{columns:t.columns,data:t.items,loading:t.loading,"no-data-text":t.$t("pages.no_data")},scopedSlots:t._u([{key:"key",fn:function(e){var r=e.row;return[n("nuxt-link",{attrs:{to:{name:"projects-projectId-menu_layouts-menuId-show",params:{projectId:t.$route.params.projectId,menuId:r.id}}}},[t._v("\n        "+t._s(r.key)+"\n      ")])]}},{key:"name_en",fn:function(e){var n=e.row;return[t._v("\n      "+t._s(n.name_en||"-")+"\n    ")]}},{key:"name_th",fn:function(e){var n=e.row;return[t._v("\n      "+t._s(n.name_th||"-")+"\n    ")]}},{key:"status",fn:function(e){var r=e.row;return[n("i-switch",{attrs:{size:"small",value:t.statusSetting(r.status),"before-change":t.handleBeforeChange,"true-color":"#57BA5B","false-color":"#F3F3F3"},on:{"on-change":function(e){return t.changeStatus(r)}}})]}},{key:"action",fn:function(e){var r=e.row;return[n("Tooltip",{attrs:{content:t.$t("button.edit"),placement:"top"}},[n("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"ios-create-outline",size:"20"},on:{click:function(e){return t.$router.push({name:"projects-projectId-menu_layouts-menuId-edit",params:{menuId:r.id}})}}})],1),t._v(" "),n("Tooltip",{attrs:{content:t.$t("button.remove"),placement:"top"}},[n("Icon",{staticStyle:{cursor:"pointer"},attrs:{type:"ios-trash-outline",size:"20"},on:{click:function(e){return t.handleRemove(r)}}})],1)]}}])})],1)}),[],!1,null,"509aa461",null);e.default=component.exports}}]);